function domReady(e){var t=!1,n=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",r),window.removeEventListener("load",r)):(document.detachEvent("onreadystatechange",r),window.detachEvent("onload",r))},r=function(){t||!document.addEventListener&&"load"!==event.type&&"complete"!==document.readyState||(t=!0,n(),e())};if("complete"===document.readyState)e();else if(document.addEventListener)document.addEventListener("DOMContentLoaded",r),window.addEventListener("load",r);else{document.attachEvent("onreadystatechange",r),window.attachEvent("onload",r);var a=!1;try{a=null==window.frameElement&&document.documentElement}catch(e){}a&&a.doScroll&&!function r(){if(!t){try{a.doScroll("left")}catch(e){return setTimeout(r,50)}t=!0,n(),e()}}()}}function customAddEventListener(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,function(){n.call(e)})}function customForEach(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}function customForEachElement(e,t){for(var n=document.querySelectorAll(e),r=0;r<n.length;r++)t(n[r],r)}function customAddClass(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function customRemoveClass(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function customGetClosest(e,t){for(var n=t.charAt(0);e&&e!==document;e=e.parentNode){if("."===n&&e.classList.contains(t.substr(1)))return e;if("#"===n&&e.id===t.substr(1))return e;if("["===n&&e.hasAttribute(t.substr(1,t.length-2)))return e;if(e.tagName.toLowerCase()===t)return e}return!1}function collectFormData(e){var t,n,r,a={};if("object"==typeof e&&"FORM"==e.nodeName){var o=e.elements.length;for(t=0;t<o;t++)if(n=e.elements[t],n.name&&!n.disabled&&"file"!=n.type&&"reset"!=n.type&&"submit"!=n.type&&"button"!=n.type)if("select-multiple"==n.type)for(r=e.elements[t].options.length,j=0;j<r;j++)n.options[j].selected&&(a[n.name]=n.options[j].value);else("checkbox"!=n.type&&"radio"!=n.type||n.checked)&&(a[n.name]=n.value)}return a}domReady(function(){(new InputMask).Initialize(document.querySelectorAll("#reportee_birthdate"),{mask:InputMaskDefaultMask.Date,placeHolder:"01/01/2015"});var e=new Validatinator({formSurvey:{user_email:"email",reportee_name:"required",address:"required",district:"required",probable_cause:"required",reportee_mother_name:"required"}}),t=document.querySelector('form[name="formSurvey"]');customAddEventListener(t,"submit",function(n){n.preventDefault(),customForEachElement(".input-error",function(e,t){customRemoveClass(e,"input-error")});var r="formSurvey";if(e.fails(r))for(var a in e.errors[r])!function(e){var t=document.getElementsByName(e)[0],n=customGetClosest(t,".form-group");customAddClass(n,"input-error"),t.focus()}(a);else{var o=collectFormData(t);document.body.className="state-submitting",aja().url(LANDING_API_URL+"/v1/reports").method("post").body(o).type("json").on("success",function(){document.body.className="state-submitted-successfully"}).on("422",function(e){switch(e=JSON.parse(e),document.body.className="state-not-submitted state-failed-to-submit",e.type){case"not_found":var t=document.getElementsByName("user_email")[0],n=customGetClosest(t,".form-group");document.getElementById("error-message").innerHTML=e.error,customAddClass(n,"input-error"),t.focus();break;case"params":for(var r in e.error){var a=document.getElementsByName(r)[0],n=customGetClosest(a,".form-group");customAddClass(n,"input-error")}document.getElementById("error-message").innerHTML="Por favor, verifique os campos destacados abaixo.";break;default:document.getElementById("error-message").innerHTML=e.error}}).go()}})});var InputMaskDefaultMask=new function(){return{Date:"99/99/9999",DateTime:"99/99/9999 99:99:99",DateTimeShort:"99/99/9999 99:99",Time:"99:99:99",TimeShort:"99:99",Ssn:"999-99-9999",Phone:"(999) 999-9999"}},InputMaskDataType=new function(){return{Date:1,DateTime:2,DateTimeShort:3,Time:4,TimeShort:5}},InputMask=function(){"use strict";var e=["-","_","(",")","[","]",":",".",",","$","%","@"," ","/"],t=["A","9","*"],n="",r=null,a=!1,o=!1,u=!1,i=!1,l=!1,c=null,s={asterisk:42,zero:48,nine:57,a:65,z:90,backSpace:8,tab:9,delete:46,left:37,right:39,end:35,home:36,numberPadZero:96,numberPadNine:105,shift:16,enter:13,control:17,escape:27,v:86,c:67,x:88},d=function(e,t,n){return e&&t&&n&&e>=t&&e<=n},f=function(e){var t=new Date,n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()));if(e)if(d(c,1,3)){var r=new Date(e);isNaN(r.getTime())||(n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds())))}else{var a=e.split(":"),o=a.length>0?a[0]:0,u=a.length>1?a[1]:0,i=a.length>2?a[2]:0;n.setUTCHours(o,u,i)}return n},m=function(e){var t=f(e),n=t.getUTCDate()<10?"0"+t.getUTCDate():t.getUTCDate(),r=t.getUTCMonth()+1<10?"0"+(t.getUTCMonth()+1):t.getUTCMonth()+1,a=t.getUTCFullYear(),o=t.getUTCHours()<10?"0"+t.getUTCHours():t.getUTCHours(),u=t.getUTCMinutes()<10?"0"+t.getUTCMinutes():t.getUTCMinutes(),i=t.getUTCSeconds()<10?"0"+t.getUTCSeconds():t.getUTCSeconds();switch(c){case 1:return r+"/"+n+"/"+a;case 2:return r+"/"+n+"/"+a+" "+o+":"+u+":"+i;case 3:return r+"/"+n+"/"+a+" "+o+":"+u;case 4:return o+":"+u+":"+i;case 5:return o+":"+u;default:return""}},v=function(e){var t=0;if(document.selection){e.focus();var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}else(e.selectionStart||"0"===e.selectionStart)&&(t=e.selectionStart);return t},g=function(e,t){var n=t.charCodeAt(0);if(n===s.asterisk)return!0;var r=e>=s.zero&&e<=s.nine||e>=s.numberPadZero&&e<=s.numberPadNine;return!(n!==s.nine||!r)||n===s.a&&e>=s.a&&e<=s.z},p=function(e,t){if(null!=e)if(e.createTextRange){var n=e.createTextRange();n.move("character",t),n.select()}else e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus()},h=function(e,t){if(e.value.length>0){var n=e.value.slice(0,t)+e.value.slice(t+1);e.value=n,e.value.length>0?p(e,t):e.focus()}},y=function(e,t,n){var r=e.value.slice(0,t)+n+e.value.slice(t);e.value=r,e.value.length>0?p(e,t+1):e.focus()},b=function(t,n){for(;;){var a=e.indexOf(r[n])>-1,o=t.value.charAt(n)===r[n];if(!a||o)return;y(t,n,r[n]),n+=1}},C=function(t,n,r){if(t.value.length>0)for(;;){var a=t.value.charAt(n),o=e.indexOf(a)>-1;if(!o||0===n||n===t.value.length)return;h(t,n),r===s.backSpace&&(n-=1),r===s.delete&&(n+=1)}},D=function(e){if(null!=e&&""!==e.value){var t=f(e.value);return d(c,1,3)&&(isNaN(t.getDate())||t.getFullYear()<=1e3)?void(e.value=""):c>1&&isNaN(t.getTime())?void(e.value=""):void 0}},E=function(e){if(e.value.length>0){if(e.value.length!==r.length)return void(e.value="");for(var n=0;n<e.value;n++){var a=e.value.charAt(n),o=r[n];if(t.indexOf(o)>-1){if(a===o||o.charCodeAt(0)===s.asterisk)continue;return void(e.value="")}if(o.charCodeAt(0)===s.a){if(a.charCodeAt(0)<=s.a||a>=s.z)return void(e.value="")}else if(o.charCodeAt(0)===s.nine&&(a.charCodeAt(0)<=s.zero||a>=s.nine))return void(e.value="")}l&&c&&D(e)}},T=function(e,t){var l=t.which,d=[s.v,s.c,s.x].indexOf(l)>-1&&t.ctrlKey,f=[s.left,s.right,s.tab].indexOf(l)>-1,p=t.ctrlKey||t.shiftKey;if(d||f||p)return!0;if(0===e.selectionStart&&e.selectionEnd===e.value.length&&(n=e.value,e.value=""),l===s.escape)return""!==n&&(e.value=n),!0;if(l===s.backSpace||l===s.delete)return l===s.backSpace&&(C(e,v(e)-1,l),h(e,v(e)-1)),l===s.delete&&(C(e,v(e),l),h(e,v(e))),t.preventDefault(),!1;if(c&&i&&l===s.enter)return c>=1&&c<=5&&(e.value=m()),t.preventDefault(),!1;if(e.value.length===r.length)return t.preventDefault(),!1;if(a&&b(e,v(e)),g(l,r[v(e)])){l>=s.numberPadZero&&l<=s.numberPadNine&&(l-=48);var D=t.shiftKey?String.fromCharCode(l).toUpperCase():String.fromCharCode(l).toLowerCase();o&&(D=D.toUpperCase()),u&&(D=D.toLowerCase()),y(e,v(e),D),a&&b(e,v(e))}return t.preventDefault(),!1},w=function(t,n,r){var a="";if(null!=r&&""!==r?a=r:null!=n&&window.clipboardData&&window.clipboardData.getData?a=window.clipboardData.getData("text"):null!=n&&n.clipboardData&&n.clipboardData.getData&&(a=n.clipboardData.getData("text/plain")),null!=a&&""!==a){for(var o=0;o<e.length;o++)a.replace(e[o],"");for(var u=0;u<a.length;u++)if(!(e.indexOf(a[u])>-1)){var i=document.createEventObject?document.createEventObject():document.createEvent("Events");i.initEvent&&i.initEvent("keydown",!0,!0),i.keyCode=i.which=a[u].charCodeAt(0),T(t,i)}}return!1},S=function(t){var n=t.value;if(d(c,1,5)&&(n=m(t.value)),null!=n&&""!==n){t.value="";for(var r=0;r<n.length;r++)e.indexOf(n[r])>-1||(a&&b(t,v(t)),y(t,v(t),n[r]),a&&b(t,v(t)))}};return{Initialize:function(e,t){e&&t&&(t.mask&&t.mask.length>0&&(r=t.mask.split(""),a=!0),t.forceUpper&&(o=t.forceUpper),t.forceLower&&(u=t.forceLower),t.validateDataType&&(l=t.validateDataType),t.dataType&&(c=t.dataType),t.useEnterKey&&(i=t.useEnterKey),[].forEach.call(e,function(e){e.onblur=function(){return!(!e.getAttribute("readonly")&&a)||E(e)},e.onkeydown=function(t){return!!e.getAttribute("readonly")||T(e,t)},e.onpaste=function(t){return!!e.getAttribute("readonly")||w(e,t,null)},t.placeHolder&&e.setAttribute("placeholder",t.placeHolder),e.value.length>0&&a&&S(e)}),document.activeElement.blur(),document.body.scrollTop=document.documentElement.scrollTop=0)}}};