angular.module("BuscaAtivaEscolarAlert",["ngResource","ui.bootstrap","ui.select","ui.utils.masks"]),angular.module("BuscaAtivaEscolarAlert").controller("formCtrl",function(e,t,a,i){e.static=i,e.fetchCities=function(t){var i={name:t,$hide_loading_feedback:!0};return e.alert.place_uf&&(i.uf=e.alert.place_uf),console.log("[create_alert] Looking for cities: ",i),a.search(i).$promise.then(function(e){return e.results})},e.renderSelectedCity=function(e){return e?e.uf+" / "+e.name:""},e.class="state-not-submitted",e.createAlert=function(a){var i={email:a.email,name:a.name,alert_cause_id:a.alert_cause_id,mother_name:a.mother_name,place_address:a.place_address,place_neighborhood:a.place_neighborhood,place_city_id:a.place_city.ibge_city_id,place_city_name:a.place_city.name,place_uf:a.place_uf},n={headers:{"Content-Type":"application/json"}};return t.post("http://api.busca-ativa-escolar.dev.lqdi.net/api/v1/integration/lp/alert_spawn",JSON.stringify(i),n).then(function(t){e.class="state-submitted-successfully",angular.element(document.querySelector("#myModal")).modal("hide")})}}),angular.module("BuscaAtivaEscolarAlert").factory("Cities",function(e){return headers={},e("http://api.busca-ativa-escolar.dev.lqdi.net/api/v1/cities/:id",{id:"@id"},{find:{method:"GET",headers:headers},search:{url:"http://api.busca-ativa-escolar.dev.lqdi.net/api/v1/cities/search",method:"POST",headers:headers},checkIfAvailable:{url:"http://api.busca-ativa-escolar.dev.lqdi.net/api/v1/cities/check_availability",method:"POST",headers:headers}})}),angular.module("BuscaAtivaEscolarAlert").factory("StaticData",function(e,t){function a(){console.log("[platform.static_data] Downloading latest static data definitions..."),h=t.get(f).then(n)}function i(){a()}function n(t){console.log("[platform.static_data] Downloaded! Version=",t.data.version,"Timestamp=",t.data.timestamp,"Data=",t.data.data),p=t.data.data,e.$broadcast("StaticData.ready")}function r(){return f}function s(){return p.length?p.length:0}function c(){return s()>0}function l(){return p.AlertCause?p.AlertCause:[]}function o(){return p.UFs?p.UFs:[]}function u(){return p.APIEndpoints?p.APIEndpoints:[]}function d(){return p.Config?p.Config.uploads.allowed_mime_types:[]}var p={},f="http://api.busca-ativa-escolar.dev.lqdi.net/api/v1/static/static_data?version=latest",h={};return{fetchLatestVersion:a,refresh:i,getAlertCauses:l,getAllowedMimeTypes:d,getUFs:o,getAPIEndpoints:u,isReady:c,getNumChains:s,getDataFile:r}}).run(function(e){e.refresh()});