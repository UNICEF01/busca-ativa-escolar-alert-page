<!DOCTYPE html>
<html lang="pt-BR" xmlns:ng="http://angularjs.org" ng-app="BuscaAtivaEscolarAlert">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico" />
    <title>Busca Ativa Escolar</title>

    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="vendor/angular-ui-select/dist/select.css" />
    <link rel="stylesheet" href="vendor/angular-bootstrap/ui-bootstrap-csp.css" />
    <link rel="stylesheet" href="vendor/angular-popeye/release/popeye.css"></script>

    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/selectivizr/1.0.2/selectivizr-min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style type="text/css">
        form .ng-submitted.ng-invalid input {
             border: 1px solid red;
        }

        .popeye-modal{
            color: #000;
        }

        .popeye-modal-container .popeye-modal {
            font-style: #000;
            width: 30%;
            min-width: 0;
            min-height: 0;
            padding: 1.5em 0.5em 0.5em 0.5em;
        }

    </style>

</head>
<body ng-class="class" ng-controller="formCtrl">
    <div class="container">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <section class="box">
                    <div class="box-container center-block">
                        <header class="text-center">
                            <img class="logo" src="images/topo_logos_unicef@2x.png" class="img-responsive" height="220" title="Busca Ativa Escolar" alt="Busca Ativa Escolar"/>
                        </header>
                        <article class="stateful if-not-submitted if-submitting">
                            <div class="row">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <div class="form-group">
                                        <p style="font-weight: bold;">Para enviar um alerta, preencha o formulário a seguir com as informações sobre a criança ou o adolescente fora da escola.</label>
                                                                               
                                        <p class="help-block"> Campos marcados com (*) são obrigatórios.</p>
<!--                                         {{form.$valid}}
 -->                                    </div>
                    
                                    <form name="form" class="clearfix" ng-submit="createAlert(form.$valid, alert)" novalidate="novalidate"">     
                                        <div class="form-group"> 

                                            <label for="user_email">E-mail do agente comunitário *
                                                <a href="#" data-toggle="tooltip" title="O agente comunitário é quem faz o alerta sobre uma criança ou adolescente fora da escola. Neste campo, deve ser colocado o mesmo email utilizado no cadastro.">
                                                 <img  src="images/tooltip.png" height="20px" />
                                                </a>
                                            </label> 
                                            <input type="email" class="form-control"  name="user_email" placeholder="E-mail do agente comunitário" id="ldp_email" ng-model="alert.email" ng-required="true">   

                                            <div ng-show="form.$submitted || form.user_email.$touched">
                                              <span ng-show="form.user_email.$error.required">Email é obrigatório.</span>
                                              <span ng-show="form.user_email.$error.email">Email inválido.</span>
                                             </div>

                                                  
                                        </div>
                                        <div class="form-group">
                                            <label for="name">Nome completo da crian&ccedil;a *</label>
                                            <span class="input-helper pull-right hidden-xs">Sem abrevia&ccedil;&otilde;es</span>
                                            <input type="text" class="form-control" name="name" placeholder="Nome completo da crian&ccedil;a" id="ldp-name" ng-model="alert.name" ng-required="true">
                                            <div ng-show="form.$submitted || form.name.$touched">
                                              <span ng-show="form.name.$error.required">Nome é obrigatório.</span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="mother_name">Nome do pai/mãe ou responsável *</label>
                                            <span class="input-helper pull-right hidden-xs">Sem abrevia&ccedil;&otilde;es</span>
                                            <input type="text" class="form-control" name="mother_name" placeholder="Nome do pai/mãe ou respons&aacute;vel" id="ldp-mother-name" ng-model="alert.mother_name" ng-required="true">
                                            <div ng-show="form.$submitted || form.mother_name.$touched">
                                              <span ng-show="form.mother_name.$error.required">Responsável é obrigatório.</span>
                                            </div>

                                        </div>
                                        <div class="form-group">
                                            <label for="birthdate">Data de nascimento da crian&ccedil;a</label>
                                            <input type="text" class="form-control" name="birthdate" placeholder="2015/01/01" id="ldp-dob" ng-model="alert.dob" ui-date-mask >

                                        </div>
                                        <div class="form-group">
                                            <label for="address">Endere&ccedil;o *</label>
                                            <input type="text" class="form-control" name="address" placeholder="Endere&ccedil;o" id="ldp-address" ng-model="alert.place_address" ng-required="true">
                                            <div ng-show="form.$submitted || form.address.$touched">
                                              <span ng-show="form.address.$error.required">Endereço é obrigatório.</span>
                                            </div>

                                        </div>
                                        <div class="form-group">
                                            <label for="district">Bairro *</label>
                                            <input type="text" class="form-control" name="district" placeholder="Bairro" id="ldp-neighborhood" ng-model="alert.place_neighborhood" ng-required="true">
                                            <div ng-show="form.$submitted || form.district.$touched">
                                              <span ng-show="form.district.$error.required">Bairro é obrigatório.</span>
                                            </div>

                                        </div>
                                        <div class="form-group">
                                            <label for="reference">Refer&ecirc;ncia</label>
                                            <input type="text" class="form-control" name="reference" placeholder="Refer&ecirc;ncia"  id="ldp-reference" ng-model="alert.place_referene">                                            
                                        </div>
                                        <div class="form-group">

                                        <label class="control-label" for="ldp-uf">UF*</label>
                                        <select class="form-control" id="ldp-uf" name="uf" ng-model="alert.place_uf" ng-options="uf.code as uf.code for uf in static.getUFs()" ng-required="true"></select>
                                        <div ng-show="form.$submitted || form.uf.$touched">
                                          <span ng-show="form.uf.$error.required">UF é obrigatório.</span>
                                        </div>

                                        <script type="text/ng-template" id="city_item.html">
                                            <a>
                                                <span ng-bind-html="match.model.name | uibTypeaheadHighlight:query"></span>
                                                <small ng-bind-html="match.model.uf | uibTypeaheadHighlight:query"></small>
                                            </a>
                                        </script>

                                        </div>                             
                                        <div class="form-group">
                                        <label class="control-label" for="ldp-city">Município*</label>

                                        <input type="text" id="ldp-city"
                                               name="city_name"
                                               class="form-control"
                                               ng-model="alert.place_city"
                                               uib-typeahead="city for city in fetchCities($viewValue)"
                                               typeahead-editable="false"
                                               typeahead-no-results="noCitiesFound"
                                               typeahead-loading="citiesLoading"
                                               typeahead-focus-first="true"
                                               typeahead-template-url="city_item.html"
                                               typeahead-wait-ms="400"
                                               typeahead-min-length="3"
                                               typeahead-input-formatter="renderSelectedCity($model)"
                                               ng-required="true">
                                        <div ng-show="form.$submitted || form.city_name.$touched">
                                            <span ng-show="form.city_name.$error.required">Município é obrigatório.</span>
                                        </div>                                               
                                        
                                        <div ng-show="citiesLoading">
                                            <i class="fa fa-refresh rotate-icon"></i> Buscando cidades...
                                        </div>
                                        
                                        <div ng-show="noCitiesFound">
                                            <i class="fa fa-remove"></i> Nenhuma cidade encontrada
                                        </div>
                            
                                        </div>                                                                          
                                            <div class="form-group-options">
                                            <label>Por que a criança ou adolescente está fora da escola? *</label>
                                            <p class="help-block"> Escolha o principal motivo identificado</p>
                                            <div ng-show="form.$submitted || form.alert_cause_id.$touched">
                                              <span ng-show="form.alert_cause_id.$error.required">Causa é obrigatório.</span>
                                            </div>                                            
                                        </div>

                                        <div class="form-group">
                                            <p class="causes-error"><img src="images/warning.gif" width="16" height="16"> Por favor, selecione uma das opções abaixo.</p>
                                             <div class="radio" ng-repeat="alertCause in static.getAlertCauses()">
                                            <label>
                                                <input name="alert_cause_id" ng-model="alert.alert_cause_id" ng-value="alertCause.id" type="radio"> {{alertCause.label}}
                                            </label>
                                            </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <button type="button" class="stateful if-not-submitted btn btn-send btn-block" ng-click="modal(form.$valid, alert)"  >Enviar</button>
                                        </div>

                                    </form>
                                </div>
                            </div>
                        </article>

                        <article class="stateful if-submitted-successfully" id="success-screen">
                            <div class="row">
                                <div class="col-xs-3">
                                    <img width="100" height="100" src="images/check.png">
                                </div>
                                <div class="col-xs-9 phrase">
                                    <h2>Alerta enviado com sucesso!</h2>
                                    <p><a href="/">Clique aqui para realizar um novo alerta</a> </p>
                                </div>
                            </div>
                        </article>

                    </div>
                </section>
            </div>
        </div>
    </div>   

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <a href="http://unicef.org.br/?utm_source=PageWeb_BuscaAtivaEscolar" target="_blank">
                        <img  class="unicef-logo" src="images/logo_unicef.png"  alt="UNICEF" title="UNICEF">
                    </a>
                </div>

                <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12">
                    <a href="https://undime.org.br/?utm_source=PageWeb_BuscaAtivaEscolar" target="_blank">
                        <img src="images/logo_undime.png"  alt="UNDIME" title="UNDIME">
                    </a>
                </div>

                <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12" >
                    <a href="http://www.congemas.org.br/?utm_source=PageWeb_BuscaAtivaEscolar" target="_blank">
                       <img class="img-responsive"  src="images/logo_congemas.png" alt="CONGEMAS" title="CONGEMAS" >
                    </a>
                </div>

                <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <a href="https://institutotim.org.br/?utm_source=PageWeb_BuscaAtivaEscolar" target="_blank">desenvolvido por
                        <img src="images/logo_instituto_tim.png" height="27px" alt="Instituto TIM" title="Instituto TIM">
                    </a>
                </div>
            </div>
        </div>
    </footer>



    <script src="vendor/angular/angular.js"></script>
    <script src="vendor/angular-resource/angular-resource.js"></script>
    <script src="vendor/angular-bootstrap/ui-bootstrap.js"></script>
    <script src="vendor/angular-bootstrap/ui-bootstrap-tpls.js"></script>
    <script src="vendor/angular-ui-select/dist/select.js"></script>
    <script src="vendor/angular-input-masks/angular-input-masks-standalone.min.js"></script>
    <script src="vendor/angular-popeye/release/popeye.js"></script>
    <script src="vendor/jquery/dist/jquery.js"></script>
    <script src="vendor/bootstrap-sass/assets/javascripts/bootstrap.js"></script>
    <script src="js/all.js"></script>

    <!-- @endif -->
    <!-- @if NODE_ENV='production' -->
   <!-- <script type="text/javascript" src="js/all.min.js"></script>-->
    <!-- @endif -->
</body>
</html>
